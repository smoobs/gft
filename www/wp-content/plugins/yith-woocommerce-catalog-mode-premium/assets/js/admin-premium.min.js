jQuery(function(a){a("input[name^=ywctm_inquiry_form_where_show]").on("change, click",function(){a(this).is(":checked")&&"tab"===a(this).val()&&a("input[name^=ywctm_inquiry_form_style][value=classic]").prop("checked",!0).trigger("click").trigger("change")}).trigger("change"),a("input[name^=ywctm_inquiry_form_style]").on("change",function(){a(this).is(":checked")&&"toggle"===a(this).val()?a("input[name^=ywctm_inquiry_form_tab_title]").parent().parent().parent().hide():a("input[name^=ywctm_inquiry_form_tab_title]").parent().parent().parent().show(500)}).trigger("change"),a("select[name^=ywctm_inquiry_form_type]").on("change",function(){var t=a("#ywctm_reCAPTCHA");"default"!==a(this).val()&&"yes"===t.val()&&t.prop("checked",!1).val("no").removeClass("onoffchecked").trigger("change"),"default"!==a(this).val()?a("tr.ywctm-default-form").hide():a("tr.ywctm-default-form").show(500)}).trigger("change"),a(".ywctm-exclusions .yith-save-button").on("click",function(t){window.onbeforeunload=null;var e=a("#item_type").val(),n=a("#"+e+"_ids");if(0===n.find("option").length)return n.parent().find("small").remove(),n.parent().append('<small style="color:#ff0000">'+ywctm.error_messages[e]+"</small>"),a("html, body").animate({scrollTop:n.parent().offset().top-30},500),t.preventDefault(),!1}),a(".ywctm-exclusions #doaction, .ywctm-exclusions #doaction2, .ywctm-exclusions #ywctm-filter-submit, .ywctm-exclusions #search-submit, .ywctm-exclusions .pagination-links, .ywctm-exclusions .yith-add-button").on("click",function(){window.onbeforeunload=""}),a(".column-inquiry_form .on_off").on("change",function(){var t={action:"ywctm_enable_inquiry_form",item_id:a(this).parent().data("item-id"),enabled:a(this).val(),section:a(this).parent().data("section"),vendor_id:ywctm.vendor_id,_wpnonce:a("#_wpnonce").val()};a.post(ywctm.ajax_url,t)}),a(".column-exclude .on_off").on("change",function(){var t={action:"ywctm_exclude_vendor",item_id:a(this).attr("id").replace("exclude_vendor",""),enabled:a(this).val(),_wpnonce:a("#_wpnonce").val()};a.post(ywctm.ajax_url,t)});var t=a("tr.ajax-products.product_ids"),e=a("tr.ajax-terms.category_ids"),n=a("tr.ajax-terms.tag_ids");function c(t){var e=t.attr("id"),n=-1!==e.indexOf("start")?"minDate":"maxDate",c="#"+("minDate"==n?e.replace("start","end"):e.replace("end","start")),o=t.datepicker("getDate");a(c).datepicker("option",n,o),a(t).change()}a("#item_type, .ywctm-exclusion-list-popup-wrapper #item_type").on("change",function(){switch(a(this).val()){case"category":t.hide(),e.show(500),n.hide();break;case"tag":t.hide(),e.hide(),n.show(500);break;default:t.show(500),e.hide(),n.hide()}}).trigger("change"),a("#ywctm_enable_atc_custom_options").on("change",function(){"no"===a(this).val()?(a("tr.ywctm_atc_status").hide(),a("tr.ywctm_custom_button").hide(),a("tr.ywctm_custom_button_loop").hide()):a("tr.ywctm_atc_status").show(500),a("#ywctm_atc_status").trigger("change")}).trigger("change"),a("#ywctm_atc_status").on("change",function(){var t=a("#ywctm_enable_atc_custom_options").val();"show"===a(this).val()||"no"===t?(a("tr.ywctm_custom_button").hide(),a("tr.ywctm_custom_button_loop").hide()):(a("tr.ywctm_custom_button").show(500),a("tr.ywctm_custom_button_loop").show(500)),a("#ywctm_custom_button").trigger("change"),a("#ywctm_custom_button_loop").trigger("change")}).trigger("change"),a("#ywctm_enable_price_custom_options").on("change",function(){"no"===a(this).val()?(a("tr.ywctm_price_status").hide(),a("tr.ywctm_custom_price_text").hide()):a("tr.ywctm_price_status").show(500),a("#ywctm_price_status").trigger("change")}).trigger("change"),a("#ywctm_price_status").on("change",function(){var t=a("#ywctm_enable_price_custom_options").val();"show"===a(this).val()||"no"===t?a("tr.ywctm_custom_price_text").hide():a("tr.ywctm_custom_price_text").show(500),a("#ywctm_custom_price_text").trigger("change")}).trigger("change"),a("#ywctm_has_exclusion").on("change",function(){"no"===a(this).val()?(a("#ywctm_enable_atc_custom_options").prop("checked",!1).val("no").removeClass("onoffchecked").trigger("change"),a("#ywctm_enable_price_custom_options").prop("checked",!1).val("no").removeClass("onoffchecked").trigger("change"),a("tr.ywctm_enable_inquiry_form").hide(),a("tr.ywctm_enable_atc_custom_options").hide(),a("tr.ywctm_enable_price_custom_options").hide()):(a("tr.ywctm_enable_inquiry_form").show(500),a("tr.ywctm_enable_atc_custom_options").show(500),a("tr.ywctm_enable_price_custom_options").show(500))}).trigger("change"),a("#ywctm_custom_button").on("change",function(){var t=a("#ywctm_atc_status").val(),e=a("#ywctm_enable_atc_custom_options").val();-1===a.inArray(parseInt(a(this).val()),ywctm.buttons_custom_url)||"show"===t||"no"===e?a("tr.ywctm_custom_button_url").hide():a("tr.ywctm_custom_button_url").show(500)}).trigger("change"),a("#ywctm_custom_button_loop").on("change",function(){var t=a("#ywctm_atc_status").val(),e=a("#ywctm_enable_atc_custom_options").val();-1===a.inArray(parseInt(a(this).val()),ywctm.buttons_custom_url)||"show"===t||"no"===e?a("tr.ywctm_custom_button_loop_url").hide():a("tr.ywctm_custom_button_loop_url").show(500)}).trigger("change"),a("#ywctm_custom_price_text").on("change",function(){var t=a("#ywctm_price_status").val(),e=a("#ywctm_enable_price_custom_options").val();-1===a.inArray(parseInt(a(this).val()),ywctm.buttons_custom_url)||"show"===t||"no"===e?a("tr.ywctm_custom_price_text_url").hide():a("tr.ywctm_custom_price_text_url").show(500)}).trigger("change"),a("#ywctm-new-time-range, #ywctm-new-date-range").on("click",function(t){t.preventDefault();var e="ywctm-new-time-range"===a(this).attr("id")?"time":"date",n=a(".ywctm-"+e+"-ranges"),c=n.find(".ywctm-"+e+"-range-row"),o=1;c.each(function(){var t=a(this).data("index");o<t&&(o=t)});var i=o+1,r=wp.template("ywctm-"+e+"-range-row");a(r({index:i})).appendTo(n),a(document.body).trigger("wc-enhanced-select-init"),a(document.body).trigger("yith-framework-enhanced-select-init"),a(document.body).trigger("yith_fields_init")}),a("#ywctm_disable_shop").on("change",function(){"no"===a(this).val()&&(a("#ywctm_disable_shop_timerange").prop("checked",!1).val("no").removeClass("onoffchecked").trigger("change"),a("#ywctm_disable_shop_daterange").prop("checked",!1).val("no").removeClass("onoffchecked").trigger("change"))}).trigger("change"),a("#ywctm_disable_shop_timerange").on("change",function(){"no"===a(this).val()?a("#ywctm_disable_shop_timerange_ranges").find(".text input").each(function(){a(this).attr("required",!1)}):a("#ywctm_disable_shop_timerange_ranges").find(".text input").each(function(){a(this).attr("required",!0)})}).trigger("change"),a("#ywctm_disable_shop_daterange").on("change",function(){"no"===a(this).val()?a("#ywctm_disable_shop_daterange_ranges").find(".datepicker input").each(function(){a(this).attr("required",!1)}):a("#ywctm_disable_shop_daterange_ranges").find(".datepicker input").each(function(){a(this).attr("required",!0)})}).trigger("change"),a(document).on("click",".yith-icon.yith-icon-trash",function(){var t=a(this),e=t.closest("div.ywctm-time-range-row");e.length||(e=t.closest("div.ywctm-date-range-row")),e.remove()}),a(document.body).on("ywctm_add_error_tip",function(t,e,n){var c=e.position();0===e.parent().find(".wc_error_tip").length&&(e.after('<div class="wc_error_tip '+n+'">'+ywctm.error_messages[n]+"</div>"),e.parent().find(".wc_error_tip").css("width",150).css("left",c.left+e.width()-e.width()/2-a(".wc_error_tip").width()/2).css("top",c.top+e.height()).fadeIn("100"))}).on("blur",".ywctm-time-ranges-wrapper .text input",function(){a(".wc_error_tip").fadeOut("100",function(){a(this).remove()})}).on("keyup",".ywctm-time-ranges-wrapper .text input",function(t){var e=new RegExp("^"+a(this).prop("pattern")+"$","gi"),n=a(this).hasClass("ywctm-hours")?"error_hours":"error_minutes",c=a(this).val(),o=t.keyCode||t.which;e.test(c)||9===o?a(document.body).triggerHandler("wc_remove_error_tip",[a(this),n]):a(document.body).triggerHandler("ywctm_add_error_tip",[a(this),n])}),a.datepicker.setDefaults({onSelect:function(){c(a(this))}}),a(".yith-plugin-fw-datepicker").each(function(){a(this).each(function(){c(a(this))})});var o=a(document).find(".ywctm-exclusion-list-popup-wrapper"),i=o.find("form");a(document).on("click",".yith-add-button",function(t){t.preventDefault(),(o=a(document).find(".ywctm-exclusion-list-popup-wrapper")).dialog({closeText:"",title:ywctm.popup_labels.title.replace(/&#039;/g,"'"),width:500,modal:!0,dialogClass:"yith-plugin-ui ywctm-exclusion-list-popup",buttons:[{text:ywctm.popup_labels.save.replace(/&#039;/g,"'"),click:function(t){window.onbeforeunload=null;var e=a(".ywctm-exclusion-list-popup-wrapper"),n=e.hasClass("vendor-exclusion"),c=e.find("#item_type").val(),o=n?e.find("#item_ids"):e.find("#"+c+"_ids");if(0===o.find("option").length)return o.parent().find("small").remove(),o.parent().append('<small style="color:#ff0000">'+ywctm.error_messages[c]+"</small>"),t.preventDefault(),!1;i.submit()},"class":"yith-save-button"}]})})});